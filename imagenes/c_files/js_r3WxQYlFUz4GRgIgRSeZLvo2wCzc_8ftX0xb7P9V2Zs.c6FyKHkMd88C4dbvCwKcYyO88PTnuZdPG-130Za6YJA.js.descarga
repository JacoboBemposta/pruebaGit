(function($){var search=[],current_lang=drupalSettings.path.currentLanguage,search_route=(current_lang=="es")?"/noticias/busqueda?langcode=es":"/en/news/search?langcode=en",text_button=current_lang==='es'?{open:"Búsqueda avanzada",close:"Ir a búsqueda básica"}:{open:"Advanced search",close:"Back to basic search"};search.init=function(){search.set_names();search.set_initial_state();search.set_events()};search.set_names=function(){search.mobile_toggle=$(".mh-conecta .mh-helper-search span");search.nav_search=$("#search-bar");search.nav_search_link=$(".mh-conecta .mh-search a");search.submit_button=$("#edit-submit-resultados-busqueda");search.refine_trigger=$("#toggle-adv-search");search.taxonomy_selects=$(".adv-category, .adv-campus, .adv-school");search.date_min=$("#adv-search #edit-date-min");search.date_max=$("#adv-search #edit-date-max");search.adv_date=$("#adv-search .adv-date");search.hidden_langcode=$("#adv-search .adv-language #edit-langcode");search.lang_radios=$("#adv-search .adv-language .fake-radio-wrapper span");search.lang_es=$("#adv-search .adv-language .fake-radio-wrapper #es");search.lang_en=$("#adv-search .adv-language .fake-radio-wrapper #en");search.media_filters_wrappers=$("#results-filters .note-type .fieldset-wrapper .form-item");search.media_filters=$("#results-filters .note-type .fieldset-wrapper .form-item input");search.gallery_filter=$("#results-filters .note-type .fieldset-wrapper #edit-gallery .form-item");search.video_filter=$("#results-filters .note-type .fieldset-wrapper #edit-video .form-item");search.results_header=$("#resultados-busqueda-page_1 .view-header");search.delete_filter_triggers=$(".active-filter");search.adv_search_column2=$(".adv-search-column2")};search.set_initial_state=function(){if(current_lang=="en")search.lang_en.addClass("selected");if(search.hidden_langcode.val()=="en"){search.lang_en.addClass("selected")}else search.lang_es.addClass("selected");search.media_filters.each(function(){var item=$(this).parents(".form-item");if($(this).prop("checked")==true){if($(this).is("#edit-video-1"))search.gallery_filter.removeClass("selected");item.addClass("selected")}});search.taxonomy_selects.each(function(){var label_name=$(this).find("label").text();$(this).find("select option[value='All']").text(label_name)});$("label[for='edit-date-min']").text((current_lang=="es")?"Desde":"From");$("label[for='edit-date-max']").text((current_lang=="es")?"Hasta":"To");search.results_header.insertBefore(jQuery("#results-filters"));search.results_header.slideDown();if(jQuery(window).width()<768){$("#adv-search .adv-date > span").hide();$("#adv-search .adv-date").hide();if(current_lang=="en"){search.adv_search_column2.prepend($('<div class="select_rango"><span>Date range</span> <i class="material-icons showDate">&#xe5cf;</i> </div>'))}else search.adv_search_column2.prepend($('<div class="select_rango"><span>Rango de fecha</span> <i class="material-icons showDate">&#xe5cf;</i> </div>'));search.adv_search_column2.addClass("mobile");jQuery(".adv-language").prependTo(jQuery(".adv-search-column1"))}else jQuery(".adv-language").prependTo(jQuery(".adv-search-column2"));if(search.date_min.val()==""){search.date_max.attr("disabled",true);if(current_lang=="en"){search.adv_date.after($('<div class="adv-message">Please first select the date from</div>'))}else search.adv_date.after($('<div class="adv-message">Por favor seleccione primero la fecha desde</div>'))};var value=JSON.parse(localStorage.getItem("show"));if(value){$("#busqueda-avanzada-form").toggleClass("opened");if($("#busqueda-avanzada-form").hasClass("opened")){setTimeout(function(){$("#busqueda-avanzada-form #adv-search").addClass("delay-overflow")},100)}else $("#busqueda-avanzada-form #adv-search").removeClass("delay-overflow")};var valueDate=JSON.parse(localStorage.getItem("showDate"))||false;if(valueDate)$("#adv-search .adv-date").show();$(search.refine_trigger).text(value?text_button.close:text_button.open);$('.path-noticias select:not(#edit-gallery, #edit-video, #vw-eventos-page_1 select, #edit-field-categoria-especial-target-id, #edit-langcode, .view-editorialistas .views-exposed-form .select-wrapper select,  .view-editorialistas-campus .views-exposed-form .select-wrapper select)').niceSelect();$('#edit-date-min').datetimepicker({format:'DD-MM-YYYY',ignoreReadonly:true,allowInputToggle:true,locale:current_lang||'es',widgetPositioning:{vertical:'bottom'}}).attr('readonly','readonly');$('#edit-date-max').datetimepicker({useCurrent:false,format:'DD-MM-YYYY',ignoreReadonly:true,allowInputToggle:true,locale:current_lang||'es',widgetPositioning:{vertical:'bottom'}}).attr('readonly','readonly')};search.set_events=function(){search.mobile_toggle.on("click",function(){$(this).parents(".mh-conecta").toggleClass("search-active")});search.refine_trigger.on("click",function(){var value=JSON.parse(localStorage.getItem("show"))||false;localStorage.setItem("show",JSON.stringify(!value));$(search.refine_trigger).text(value?text_button.open:text_button.close);$("#busqueda-avanzada-form").toggleClass("opened");if($("#busqueda-avanzada-form").hasClass("opened")){setTimeout(function(){$("#busqueda-avanzada-form #adv-search").addClass("delay-overflow")},100)}else $("#busqueda-avanzada-form #adv-search").removeClass("delay-overflow")});search.lang_radios.on("click",function(){search.lang_radios.removeClass("selected");$(this).addClass("selected");search.hidden_langcode.val($(this).prop("id"))});search.gallery_filter.on("click",function(){set_combined_filter("#edit-video-all",$(this))});search.video_filter.on("click",function(){set_combined_filter("#edit-gallery-all",$(this))});search.media_filters.on("click",function(event){event.stopPropagation()});search.delete_filter_triggers.on("click",function(){var reset=$(this).children("span").attr("reset");if(reset=="all"){search.taxonomy_selects.find("option[selected='selected']").removeAttr("selected");search.date_min.val("");search.date_max.val("")}else if(reset=="edit-date"){search.date_min.val("");search.date_max.val("")}else $("#"+reset).find("option[selected='selected']").removeAttr("selected");search.submit_button.trigger("click")});search.date_min.on("click",function(){search.date_max.val("");search.date_max.attr("disabled",false);$("#adv-search .adv-message").hide()});$('#edit-date-max').datetimepicker({useCurrent:false,format:'DD-MM-YYYY',ignoreReadonly:true,allowInputToggle:true,locale:current_lang||'es',widgetPositioning:{vertical:'bottom'}}).attr('readonly','readonly').on('dp.change',function(event){setTimeout(function(){search.submit_button.trigger("click")},400)});$(document).on("click","#adv-search .adv-search-column2.mobile .select_rango",function(){var valueDate=JSON.parse(localStorage.getItem("showDate"))||false;localStorage.setItem("showDate",JSON.stringify(!valueDate));if(valueDate){$("#adv-search .adv-date").hide()}else $("#adv-search .adv-date").show()});$(document).on("keyup","#search-bar",function(){search.nav_search_link.attr("href",search_route+"&keys="+search.nav_search.val())});$(document).on("click","#results-filters .nice-select .list li",function(){setTimeout(function(){search.submit_button.trigger("click")},400)});$(document).keypress(function(e){if(e.which==13)if(search.nav_search.is(":focus")){var href=search.nav_search_link.attr("href");window.location.href=href}});$(window).resize(function(){if(jQuery(window).width()<768){search.adv_search_column2.addClass("mobile");var valueDate=JSON.parse(localStorage.getItem("showDate"))||false;if(valueDate){$("#adv-search .adv-date > span").hide();$("#adv-search .adv-date").show();if(!$(".select_rango")[0])search.adv_search_column2.prepend($('<div class="select_rango"><span>Rango de fecha</span> <i class="material-icons">&#xe5cf;</i> </div>'))}else{$("#adv-search .adv-date > span").hide();$("#adv-search .adv-date").hide()};jQuery(".adv-language").prependTo(jQuery(".adv-search-column1"))}else{search.adv_search_column2.removeClass("mobile");$("#adv-search .adv-date > span").show();$("#adv-search .adv-date").show();jQuery(".adv-language").prependTo(jQuery(".adv-search-column2"))}});$(document).on("change","#edit-category",function(){setTimeout(function(){search.submit_button.trigger("click")},400)});$(document).on("change","#edit-campus",function(){setTimeout(function(){search.submit_button.trigger("click")},400)});$(document).on("change","#edit-school",function(){setTimeout(function(){search.submit_button.trigger("click")},400)});search.lang_es.on("click",function(){setTimeout(function(){search.submit_button.trigger("click")},400)});search.lang_en.on("click",function(){setTimeout(function(){search.submit_button.trigger("click")},400)})}
function set_combined_filter(secondFilterDefault,context){$(secondFilterDefault).trigger("click");search.media_filters_wrappers.removeClass("selected");context.addClass("selected");setTimeout(function(){search.submit_button.trigger("click")},500)};$(document).ready(function(){search.init()})}(jQuery))